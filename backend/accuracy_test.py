from chatbot import predict_chat
import json
import time

with open('backend/dataset/intents.json', 'r',  encoding='utf-8') as f:
    intents = json.load(f)

correct = total = 0
start_pred = time.time()

print(f"{'Predicted Intent (x)':<30} | {'User Input':<50}| {'Expected Intent (y)':<30}")
print("-" * 110)
for intent in intents['intents']:
    for pattern in intent['patterns']:
        (result, tag) = predict_chat(pattern) 
        if tag == intent["tag"]:
            correct += 1

            print(f"{intent["tag"]:<30} | {pattern:<50}| {tag:<30}")
        else:
            print(f"{intent["tag"]:<30} | {pattern:<50}| {tag:<30} --> Incorrect!")

        total += 1

print(f"Bot accuracy: {round(correct / total * 100, 2)}%")
print(f"Total Prediction time: {time.time() - start_pred:} seconds")


test_data = [
    "hi","hello","hey","good morning","good afternoon","is anyone there?","what's up?","greetings","thanks","thank you","that's helpful","thanks for the help","I appreciate it","thanks a lot","thank you very much","thanks for your assistance","much appreciated","bye","goodbye","see you later","talk to you soon","farewell","take care","catch you later","see you","have a nice day","what is cpu","definition of cpu","meaning of cpu","what is central processing unit","definition of central processing unit","meaning of central processing unit","what is processor","definition of processor","what is the meaning of processor","tell me the cpu explanation","what is the purpose of cpu","recommend a good cpu","recommend best cpu for gaming","recommend cpu for video editing","recommend a central processing unit","recommend best central processing unit for gaming","recommend central processing unit for video editing","recommend a processor","recommend best processor for gaming","recommend processor for video editing","recommend top cpu for gaming","cpu suggestions for normal usage","what is cpu cooler","definition of cpu cooler","the meaning of cpu cooler","what is the function of cpu cooler","why do I need a cpu cooler","recommend a cpu cooler","recommend best cpu cooler for gaming","recommend cpu cooler for video editing","recommend top cpu coolers","provide me some cpu cooler suggestions","what is gpu","what is the definition of gpu","what is the meaning of gpu","what is graphics processing units","the definition of graphics processing units","meaning of graphics processing units","what is the purpose of gpu","gpu functionality","recommend a gpu","recommend best gpu for gaming","recommend gpu for video editing","recommend a graphics processing units","recommend best graphics processing units for gaming","recommend graphics processing units for video editing","recommend top gpu for gaming","gpu suggestions for normal uses cases","what is pc case","the definition of pc case","the meaning of pc case","what is a computer case","computer case purpose","recommend a ATX or mini ATX case","suggest a ATX case","recommend best computer case for ATX size","recommend top cases for PCs","what is hdd","what is the definition of hdd","the meaning of hdd","what is hard disk drive","definition of hard disk drive","meaning of hard disk drive","hdd function","hdd purpose","recommend a big capacity hdd","suggest a good hdd","recommend a large hard disk drive","suggest a hard disk drive","recommend best hdd for storage","recommend top hard drives","what is ssd","the definition of ssd","what is the meaning of ssd","what is solid-state drive","definition of solid-state drive","meaning of solid-state drive","what is the function of ssd","fast ssd purpose","recommend a fast ssd","suggest a nvme ssd","recommend a nvme solid-state drive","suggest a good nvme solid-state drive","recommend best nvme ssd for performance","recommend top solid-state drives","what is psu","the definition of psu","what is the meaning of psu","what is power supply unit","definition of power supply unit","meaning of power supply unit","the function of psu","psu purpose","recommend a psu","suggest a psu","recommend a power supply unit","suggest a power supply unit","recommend best psu for gaming","recommend top power supply units","what is ram","what is the definition of ram","the meaning of ram","what is random access memory","definition of random access memory","meaning of random access memory","the ram function","ram purpose","recommend a 3200hz ram","suggest a large ram","recommend a good random access memory","suggest a best random access memory","recommend best ram for gaming","recommend top ram options","what is monitor","the definition of monitor","what is the meaning of monitor","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","recommend a 3200hz ram","suggest a large ram","recommend a good random access memory","suggest a best random access memory","recommend best ram for gaming","recommend top ram options","what is monitor","the definition of monitor","what is the meaning of monitor","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","recommend a good random access memory","suggest a best random access memory","recommend best ram for gaming","recommend top ram options","what is monitor","the definition of monitor","what is the meaning of monitor","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","recommend best ram for gaming","recommend top ram options","what is monitor","the definition of monitor","what is the meaning of monitor","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","the definition of monitor","what is the meaning of monitor","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","computer monitor purpose","monitor function","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","recommend a big monitor","suggest a good monitor","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","what is motherboard","recommend best monitor for gaming","recommend top monitor options","monitor suggestions","what is motherboard","the definition of motherboard","recommend top monitor options","monitor suggestions","what is motherboard","the definition of motherboard","meaning of motherboard","what is motherboard","the definition of motherboard","meaning of motherboard","the definition of motherboard","meaning of motherboard","motherboard function","meaning of motherboard","motherboard function","motherboard purpose","motherboard function","motherboard purpose","recommend a motherboard","motherboard purpose","recommend a motherboard","suggest a motherboard","recommend a motherboard","suggest a motherboard","recommend best motherboard for gaming","top motherboard options","suggest a motherboard","recommend best motherboard for gaming","top motherboard options","recommend best motherboard for gaming","top motherboard options","How to build a PC","How to build a PC","Assemble a custom PC system","Assemble a custom PC system","Build a personal computer from scratch","Develop a computer for specialized tasks","Steps to build a PC","What do I need to build a computer?","How to assemble a PC","DIY PC building guide","Guide to building a PC","Custom PC assembly instructions","how could you help me","what could you do","what could you do to assist me","what you can do","what help you provide","how you can be helpful","what support is offered","how can you assist me","what services do you offer","fuck you",""
    ]
correct_intent = [
    "greeting","greeting","greeting","greeting","greeting","greeting","greeting","greeting","thanks","thanks","thanks","thanks","thanks","thanks","thanks","thanks","thanks","goodbye","goodbye","goodbye","goodbye","goodbye","goodbye","goodbye","goodbye","goodbye","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","definition_cpu","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","cpu_recommendation","definition_cooler","definition_cooler","definition_cooler","definition_cooler","definition_cooler","cpu_cooler_recommendation","cpu_cooler_recommendation","cpu_cooler_recommendation","cpu_cooler_recommendation","cpu_cooler_recommendation","definition_gpu","definition_gpu","definition_gpu","definition_gpu","definition_gpu","definition_gpu","definition_gpu","definition_gpu","gpu_recommendation","gpu_recommendation","gpu_recommendation","gpu_recommendation","gpu_recommendation","gpu_recommendation","gpu_recommendation","gpu_recommendation","definition_case","definition_case","definition_case","definition_case","definition_case","case_recommendation","case_recommendation","case_recommendation","case_recommendation","definition_hdd","definition_hdd","definition_hdd","definition_hdd","definition_hdd","definition_hdd","definition_hdd","definition_hdd","hdd_recommendation","hdd_recommendation","hdd_recommendation","hdd_recommendation","hdd_recommendation","hdd_recommendation","definition_ssd","definition_ssd","definition_ssd","definition_ssd","definition_ssd","definition_ssd","definition_ssd","definition_ssd","ssd_recommendation","ssd_recommendation","ssd_recommendation","ssd_recommendation","ssd_recommendation","ssd_recommendation","definition_psu","definition_psu","definition_psu","definition_psu","definition_psu","definition_psu","definition_psu","definition_psu","psu_recommendation","psu_recommendation","psu_recommendation","psu_recommendation","psu_recommendation","psu_recommendation","definition_ram","definition_ram","definition_ram","definition_ram","definition_ram","definition_ram","definition_ram","definition_ram","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","definition_monitor","definition_monitor","definition_monitor","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","definition_monitor","definition_monitor","definition_monitor","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","ram_recommendation","definition_monitor","definition_monitor","definition_monitor","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","ram_recommendation","ram_recommendation","definition_monitor","definition_monitor","definition_monitor","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","definition_monitor","definition_monitor","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","definition_monitor","definition_monitor","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","monitor_recommendation","definition_motherboard","monitor_recommendation","monitor_recommendation","monitor_recommendation","definition_motherboard","definition_motherboard","monitor_recommendation","monitor_recommendation","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","definition_motherboard","motherboard_recommendation","definition_motherboard","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","motherboard_recommendation","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","question_build_pc","options","options","options","options","options","options","options","options","options", "Failed", "Failed"
    ]

correct1 = total1 = 0
start_pred = time.time()

print("\n")
print(f"{'Predicted Intent (x)':<30} | {'User Input':<50}| {'Expected Intent (y)':<30}")
print("-" * 110)

start_pred = time.time()
for i in range(total):
    # Check if prediction matches the actual intent and if it's a valid intent
    (predicted, tag) = predict_chat(test_data[i])
    if tag == correct_intent[i]:
        correct1 += 1
        print(f"{tag:<30} | {test_data[i]:<50}| {correct_intent[i]:<30}")
    else:
        print(f"{tag:<30} | {test_data[i]:<50}| {correct_intent[i]:<30} --> Incorrect!")

    total1 += 1
end_pred = time.time()

print(f"Bot accuracy: {round(correct1 / total1 * 100, 2)}%")
print(f"Total Prediction time: {time.time() - start_pred:} seconds")